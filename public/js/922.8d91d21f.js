"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[922],{1865:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var a=s(5063),i=s(3740),n=s(3698),l=s(2938),r=s(3180),o=s(4414),u=s(9991),d=s(9483),c=s(174),h=s(6930),g=s(2756),p=s(4312),m=s(7150),f=s(1034),v=s(7112),w=s(6513),y=s(198),b=s(2367),A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"meter-reader-app"},[t(a.A,{attrs:{fixed:"",dense:"",color:"primary",dark:""}},[t(b.sw,{staticClass:"text-subtitle-1"},[e._v("Meter Reading")]),t(f.A),t(r.A,{staticClass:"mr-2",attrs:{small:"",color:"success"}},[t(h.A,{attrs:{left:"",small:""}},[e._v("mdi-account")]),e._v(" John Reader ")],1)],1),e._v("A "),t("div",{staticClass:"content-wrapper"},[t("div",{staticClass:"search-section mb-4"},[t(v.A,{staticClass:"mb-2",attrs:{dense:"",outlined:"",clearable:"",placeholder:"Search consumer","prepend-inner-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(p.A,{attrs:{items:e.puroks,dense:"",outlined:"",label:"Filter by Purok",clearable:""},model:{value:e.selectedPurok,callback:function(t){e.selectedPurok=t},expression:"selectedPurok"}})],1),t("div",{staticClass:"consumer-list"},e._l(e.filteredConsumers,(function(s){return t(n.A,{key:s.id,staticClass:"mb-3 consumer-card",class:{"already-billed":"Pending"===s.lastBilling?.status},on:{click:function(t){return e.openBillingDialog(s)}}},[t(l.OQ,[t("div",{staticClass:"d-flex justify-space-between align-center mb-2"},[t("div",{staticClass:"consumer-name"},[e._v(e._s(s.name))]),t(r.A,{attrs:{"x-small":"",color:e.getBillingStatusColor(s.lastBilling?.status),"text-color":"white",label:""}},[e._v(" "+e._s(s.lastBilling?.status||"No Billing")+" ")])],1),t("div",{staticClass:"consumer-details"},[t("div",{staticClass:"detail-item"},[t(h.A,{attrs:{small:"",color:"grey"}},[e._v("mdi-map-marker")]),t("span",[e._v(e._s(s.address))])],1),t("div",{staticClass:"detail-item"},[t(h.A,{attrs:{small:"",color:"grey"}},[e._v("mdi-counter")]),t("span",[e._v("Last Reading: "+e._s(s.lastBilling?.presentRead||0))])],1)])])],1)})),1),t(u.A,{attrs:{fullscreen:""},model:{value:e.showBillingDialog,callback:function(t){e.showBillingDialog=t},expression:"showBillingDialog"}},[t(n.A,[t(y.A,{attrs:{dark:"",color:"primary",dense:""}},[t(i.A,{attrs:{icon:""},on:{click:function(t){e.showBillingDialog=!1}}},[t(h.A,[e._v("mdi-close")])],1),t(b.sw,[e._v("New Billing Entry")])],1),t(l.OQ,{staticClass:"pt-4"},[e.selectedConsumer?[t("div",{staticClass:"billing-consumer-info mb-4"},[t("div",{staticClass:"text-h6"},[e._v(e._s(e.selectedConsumer.name))]),t("div",{staticClass:"caption grey--text"},[e._v(e._s(e.selectedConsumer.address))])]),t(c.A,{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(g.A,[t(o.A,{attrs:{cols:"6"}},[t(v.A,{attrs:{label:"Previous Reading",outlined:"",dense:"",disabled:""},model:{value:e.previousReading,callback:function(t){e.previousReading=t},expression:"previousReading"}})],1),t(o.A,{attrs:{cols:"6"}},[t(v.A,{attrs:{label:"Present Reading",outlined:"",dense:"",type:"number",rules:e.readingRules},on:{input:e.calculateConsumption},model:{value:e.newReading,callback:function(t){e.newReading=t},expression:"newReading"}})],1),t(o.A,{attrs:{cols:"12"}},[t(v.A,{attrs:{label:"Consumption (mÂ³)",outlined:"",dense:"",disabled:""},model:{value:e.consumption,callback:function(t){e.consumption=t},expression:"consumption"}})],1),t(o.A,{attrs:{cols:"12"}},[t(p.A,{attrs:{items:e.readingTypes,label:"Reading Type",outlined:"",dense:"",required:""},model:{value:e.readingType,callback:function(t){e.readingType=t},expression:"readingType"}})],1),t(o.A,{attrs:{cols:"12"}},[t(w.A,{attrs:{label:"Notes",outlined:"",dense:"",rows:"3",placeholder:"Add any remarks about the reading"},model:{value:e.notes,callback:function(t){e.notes=t},expression:"notes"}})],1)],1)],1)]:e._e()],2),t(d.A),t(l.SL,{staticClass:"pa-4"},[t(f.A),t(i.A,{attrs:{text:""},on:{click:function(t){e.showBillingDialog=!1}}},[e._v(" Cancel ")]),t(i.A,{attrs:{color:"primary",disabled:!e.valid},on:{click:e.saveBilling}},[e._v(" Save Reading ")])],1)],1)],1),t(m.A,{attrs:{color:"success",timeout:"3000"},model:{value:e.showSuccessSnackbar,callback:function(t){e.showSuccessSnackbar=t},expression:"showSuccessSnackbar"}},[e._v(" Billing entry saved successfully ")])],1)],1)},k=[],C={name:"MeterReaderPage",data:()=>({search:"",selectedPurok:null,showBillingDialog:!1,showSuccessSnackbar:!1,selectedConsumer:null,valid:!1,previousReading:"",newReading:"",consumption:"",readingType:"Actual",notes:"",readingTypes:["Actual","Average","Estimated"],readingRules:[e=>!!e||"Reading is required",e=>e>=0||"Reading must be positive",e=>e>=(parseFloat(undefined)||0)||"Reading must be greater than previous reading"],puroks:["Purok 1","Purok 2","Purok 3","Purok 4","Purok 5"],consumers:[{id:1,name:"Juan Dela Cruz",address:"Purok 1, Sample Address",lastBilling:{status:"Paid",presentRead:150}},{id:2,name:"Maria Santos",address:"Purok 2, Sample Address",lastBilling:{status:"Pending",presentRead:200}},{id:3,name:"Pedro Garcia",address:"Purok 1, Sample Address",lastBilling:{status:"Paid",presentRead:175}}]}),computed:{filteredConsumers(){return this.consumers.filter((e=>{const t=!this.search||e.name.toLowerCase().includes(this.search.toLowerCase())||e.address.toLowerCase().includes(this.search.toLowerCase()),s=!this.selectedPurok||e.address.includes(this.selectedPurok);return t&&s}))}},methods:{getBillingStatusColor(e){switch(e){case"Paid":return"success";case"Pending":return"warning";default:return"grey"}},openBillingDialog(e){this.selectedConsumer=e,this.previousReading=e.lastBilling?.presentRead||0,this.newReading="",this.consumption="",this.readingType="Actual",this.notes="",this.showBillingDialog=!0},calculateConsumption(){if(this.newReading&&this.previousReading){const e=parseFloat(this.newReading)-parseFloat(this.previousReading);this.consumption=e>=0?e:0}else this.consumption=""},async saveBilling(){if(this.$refs.form.validate()){console.log("Saving billing:",{consumerId:this.selectedConsumer.id,previousReading:this.previousReading,presentReading:this.newReading,consumption:this.consumption,readingType:this.readingType,notes:this.notes,date:new Date}),this.showSuccessSnackbar=!0,this.showBillingDialog=!1;const e=this.consumers.findIndex((e=>e.id===this.selectedConsumer.id));-1!==e&&(this.consumers[e].lastBilling={status:"Pending",presentRead:parseFloat(this.newReading)})}}}},B=C,R=s(1656),S=(0,R.A)(B,A,k,!1,null,"f572c952",null),_=S.exports},174:function(e,t,s){s(4114);var a=s(5803),i=s(7717),n=s(7540),l=s(4152);t.A=(0,a.A)(i.A,(0,n.G)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(e){const t=e=>e.$watch("hasError",(t=>{this.$set(this.errorBag,e._uid,t)}),{immediate:!0}),s={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?s.shouldValidate=e.$watch("shouldValidate",(a=>{a&&(this.errorBag.hasOwnProperty(e._uid)||(s.valid=t(e)))})):s.valid=t(e),s},validate(){return 0===this.inputs.filter((e=>!e.validate(!0))).length},reset(){this.inputs.forEach((e=>e.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((e=>e.resetValidation())),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const t=this.inputs.find((t=>t._uid===e._uid));if(!t)return;const s=this.watchers.find((e=>e._uid===t._uid));s&&(s.valid(),s.shouldValidate()),this.watchers=this.watchers.filter((e=>e._uid!==t._uid)),this.inputs=this.inputs.filter((e=>e._uid!==t._uid)),this.$delete(this.errorBag,t._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},(0,l.$c)(this))}})},4414:function(e,t,s){s(4114),s(125);var a=s(5471),i=s(8041),n=s(4152);const l=["sm","md","lg","xl"],r=(()=>l.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),o=(()=>l.reduce(((e,t)=>(e["offset"+(0,n.Zb)(t)]={type:[String,Number],default:null},e)),{}))(),u=(()=>l.reduce(((e,t)=>(e["order"+(0,n.Zb)(t)]={type:[String,Number],default:null},e)),{}))(),d={col:Object.keys(r),offset:Object.keys(o),order:Object.keys(u)};function c(e,t,s){let a=e;if(null!=s&&!1!==s){if(t){const s=t.replace(e,"");a+=`-${s}`}return"col"!==e||""!==s&&!0!==s?(a+=`-${s}`,a.toLowerCase()):a.toLowerCase()}}const h=new Map;t.A=a.Ay.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...r,offset:{type:[String,Number],default:null},...o,order:{type:[String,Number],default:null},...u,alignSelf:{type:String,default:null,validator:e=>["auto","start","end","center","baseline","stretch"].includes(e)},tag:{type:String,default:"div"}},render(e,{props:t,data:s,children:a,parent:n}){let l="";for(const i in t)l+=String(t[i]);let r=h.get(l);if(!r){let e;for(e in r=[],d)d[e].forEach((s=>{const a=t[s],i=c(e,s,a);i&&r.push(i)}));const s=r.some((e=>e.startsWith("col-")));r.push({col:!s||!t.cols,[`col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),h.set(l,r)}return e(t.tag,(0,i.Ay)(s,{class:r}),a)}})},2756:function(e,t,s){s(4114),s(125);var a=s(5471),i=s(8041),n=s(4152);const l=["sm","md","lg","xl"],r=["start","end","center"];function o(e,t){return l.reduce(((s,a)=>(s[e+(0,n.Zb)(a)]=t(),s)),{})}const u=e=>[...r,"baseline","stretch"].includes(e),d=o("align",(()=>({type:String,default:null,validator:u}))),c=e=>[...r,"space-between","space-around"].includes(e),h=o("justify",(()=>({type:String,default:null,validator:c}))),g=e=>[...r,"space-between","space-around","stretch"].includes(e),p=o("alignContent",(()=>({type:String,default:null,validator:g}))),m={align:Object.keys(d),justify:Object.keys(h),alignContent:Object.keys(p)},f={align:"align",justify:"justify",alignContent:"align-content"};function v(e,t,s){let a=f[e];if(null!=s){if(t){const s=t.replace(e,"");a+=`-${s}`}return a+=`-${s}`,a.toLowerCase()}}const w=new Map;t.A=a.Ay.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:u},...d,justify:{type:String,default:null,validator:c},...h,alignContent:{type:String,default:null,validator:g},...p},render(e,{props:t,data:s,children:a}){let n="";for(const i in t)n+=String(t[i]);let l=w.get(n);if(!l){let e;for(e in l=[],m)m[e].forEach((s=>{const a=t[s],i=v(e,s,a);i&&l.push(i)}));l.push({"no-gutters":t.noGutters,"row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),w.set(n,l)}return e(t.tag,(0,i.Ay)(s,{staticClass:"row",class:l}),a)}})},6513:function(e,t,s){s.d(t,{A:function(){return l}});var a=s(7112),i=s(5803);const n=(0,i.A)(a.A);var l=n.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:e=>!isNaN(parseFloat(e))},rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseInt(e,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...a.A.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(e){this.$nextTick((()=>{var t;e?this.calculateInputHeight():null===(t=this.$refs.input)||void 0===t||t.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const e=this.$refs.input;if(!e)return;e.style.height="0";const t=e.scrollHeight,s=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(s,t)+"px"},genInput(){const e=a.A.options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput(e){a.A.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})}}]);
//# sourceMappingURL=922.8d91d21f.js.map
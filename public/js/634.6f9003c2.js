"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[634],{3634:function(e,t,s){s.r(t),s.d(t,{default:function(){return T}});var a=s(3740),n=s(3698),i=s(2938),o=s(4414),l=s(3449),r=s(3064),c=s(1446),d=s(9991),u=s(6930),p=s(6237),h=s(2756),m=s(4312),x=s(7150),f=s(1034),g=s(7112),v=s(6513),k=s(198),y=function(){var e=this,t=e._self._c;return t(l.A,[t(n.A,[t(i.ri,{staticClass:"d-flex align-center py-3 px-4"},[t("h2",{staticClass:"text-h5 font-weight-bold mb-0"},[e._v("Expenses")]),t(f.A),t(a.A,{staticClass:"px-4",attrs:{color:"primary","prepend-icon":"mdi-plus"},on:{click:e.openDialog}},[e._v(" Add Expense ")])],1),t(i.OQ,[t(r.A,{attrs:{items:e.expenses,headers:e.headers,search:e.search,loading:e.loading,"items-per-page":10},scopedSlots:e._u([{key:"top",fn:function(){return[t(k.A,{staticClass:"px-4 d-flex justify-end",attrs:{flat:""}},[t(g.A,{staticClass:"mt-6",class:{"focused-field":e.isFocused},attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search expenses...","hide-details":"",dense:"",outlined:"",rounded:"",clearable:""},on:{"click:clear":function(t){e.search=""},focus:function(t){e.isFocused=!0},blur:function(t){e.isFocused=!1}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]},proxy:!0},{key:"item.date",fn:function({item:t}){return[e._v(" "+e._s(e.formatDate(t.date))+" ")]}},{key:"item.amount",fn:function({item:t}){return[e._v(" ₱"+e._s(t.amount.toFixed(2))+" ")]}},{key:"item.actions",fn:function({item:s}){return[t(a.A,{staticClass:"mr-2",attrs:{small:"",color:"primary",icon:""},on:{click:function(t){return e.openDialog(s)}}},[t(u.A,{attrs:{small:""}},[e._v("mdi-pencil")])],1),t(a.A,{attrs:{small:"",color:"error",icon:""},on:{click:function(t){return e.confirmDelete(s)}}},[t(u.A,{attrs:{small:""}},[e._v("mdi-delete")])],1)]}}],null,!0)})],1)],1),t(d.A,{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(n.A,[t(i.ri,[e._v(" "+e._s(e.formTitle)+" ")]),t(i.OQ,[t(l.A,[t(h.A,[t(o.A,{attrs:{cols:"12"}},[t(p.A,{ref:"dateMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:a}){return[t(g.A,e._g(e._b({attrs:{label:"Date","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.editedItem.date,callback:function(t){e.$set(e.editedItem,"date",t)},expression:"editedItem.date"}},"v-text-field",a,!1),s))]}}]),model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[t(c.A,{on:{input:function(t){e.dateMenu=!1}},model:{value:e.editedItem.date,callback:function(t){e.$set(e.editedItem,"date",t)},expression:"editedItem.date"}})],1)],1),t(o.A,{attrs:{cols:"12"}},[t(g.A,{attrs:{label:"Amount",type:"number",prefix:"₱"},model:{value:e.editedItem.amount,callback:function(t){e.$set(e.editedItem,"amount",e._n(t))},expression:"editedItem.amount"}})],1),t(o.A,{attrs:{cols:"12"}},[t(m.A,{attrs:{items:e.expenseTypes,label:"Expense Type"},model:{value:e.editedItem.expenseType,callback:function(t){e.$set(e.editedItem,"expenseType",t)},expression:"editedItem.expenseType"}})],1),t(o.A,{attrs:{cols:"12"}},[t(v.A,{attrs:{label:"Description",rows:"3"},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1)],1)],1)],1),t(i.SL,[t(f.A),t(a.A,{attrs:{color:"grey darken-1",text:""},on:{click:e.closeDialog}},[e._v(" Cancel ")]),t(a.A,{attrs:{color:"primary",loading:e.saving},on:{click:e.saveExpense}},[e._v(" Save ")])],1)],1)],1),t(d.A,{attrs:{"max-width":"400px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[t(n.A,[t(i.ri,[e._v("Delete Expense")]),t(i.OQ,[e._v(" Are you sure you want to delete this expense? ")]),t(i.SL,[t(f.A),t(a.A,{attrs:{color:"grey darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v(" Cancel ")]),t(a.A,{attrs:{color:"error",loading:e.deleting},on:{click:e.deleteExpense}},[e._v(" Delete ")])],1)],1)],1),t(x.A,{attrs:{color:e.snackbar.color,top:""},scopedSlots:e._u([{key:"action",fn:function({attrs:s}){return[t(a.A,e._b({attrs:{text:""},on:{click:function(t){e.snackbar.show=!1}}},"v-btn",s,!1),[e._v(" Close ")])]}}]),model:{value:e.snackbar.show,callback:function(t){e.$set(e.snackbar,"show",t)},expression:"snackbar.show"}},[e._v(" "+e._s(e.snackbar.text)+" ")])],1)},A=[],w=s(1988),b=s(5093),I=s.n(b),_={name:"ExpensesPage",data:()=>({search:"",loading:!1,saving:!1,deleting:!1,dialog:!1,deleteDialog:!1,dateMenu:!1,expenses:[],headers:[{text:"Date",value:"date"},{text:"Amount",value:"amount"},{text:"Type",value:"expenseType"},{text:"Description",value:"description"},{text:"Actions",value:"actions",sortable:!1}],expenseTypes:["Salary","Utilities","Supplies","Maintenance","Other"],editedItem:{date:(new Date).toISOString().substr(0,10),amount:0,expenseType:"",description:""},defaultItem:{date:(new Date).toISOString().substr(0,10),amount:0,expenseType:"",description:""},snackbar:{show:!1,text:"",color:""}}),computed:{formTitle(){return this.editedItem._id?"Edit Expense":"New Expense"}},methods:{formatDate(e){return I()(e).format("YYYY-MM-DD")},showSnackbar(e,t="success"){this.snackbar={show:!0,text:e,color:t}},async fetchExpenses(){this.loading=!0;try{const e=await w.A.get("/expense");this.expenses=e.data}catch(e){this.showSnackbar(e.response?.data?.message||"Failed to fetch expenses","error")}this.loading=!1},openDialog(e=null){this.editedItem=e?{...e}:{...this.defaultItem},this.dialog=!0},closeDialog(){this.dialog=!1,this.$nextTick((()=>{this.editedItem={...this.defaultItem}}))},async saveExpense(){this.saving=!0;try{this.editedItem._id?(await w.A.put(`/expense/${this.editedItem._id}`,this.editedItem),this.showSnackbar("Expense updated successfully")):(await w.A.post("/expense",this.editedItem),this.showSnackbar("Expense added successfully")),this.closeDialog(),this.fetchExpenses()}catch(e){this.showSnackbar(e.response?.data?.message||"Failed to save expense","error")}this.saving=!1},confirmDelete(e){this.editedItem={...e},this.deleteDialog=!0},async deleteExpense(){this.deleting=!0;try{await w.A.delete(`/expense/${this.editedItem._id}`),this.showSnackbar("Expense deleted successfully"),this.deleteDialog=!1,this.fetchExpenses()}catch(e){this.showSnackbar(e.response?.data?.message||"Failed to delete expense","error")}this.deleting=!1}},created(){this.fetchExpenses()}},D=_,S=s(1656),E=(0,S.A)(D,y,A,!1,null,null,null),T=E.exports},6513:function(e,t,s){s.d(t,{A:function(){return o}});var a=s(7112),n=s(5803);const i=(0,n.A)(a.A);var o=i.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:e=>!isNaN(parseFloat(e))},rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseInt(e,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...a.A.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(e){this.$nextTick((()=>{var t;e?this.calculateInputHeight():null===(t=this.$refs.input)||void 0===t||t.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const e=this.$refs.input;if(!e)return;e.style.height="0";const t=e.scrollHeight,s=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(s,t)+"px"},genInput(){const e=a.A.options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput(e){a.A.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})}}]);
//# sourceMappingURL=634.6f9003c2.js.map
"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[445],{4445:function(e,t,s){s.r(t),s.d(t,{default:function(){return O}});var o=s(1965),a=s(3740),n=s(3698),r=s(2938),l=s(3180),i=s(3449),c=s(3064),u=s(9991),d=s(9483),m=s(6930),f=s(7150),p=s(1034),h=s(7112),g=s(198),k=s(7270),v=function(){var e=this,t=e._self._c;return t(i.A,[t(n.A,{attrs:{elevation:"2"}},[t(r.ri,{staticClass:"d-flex align-center py-3 px-4"},[t("h2",{staticClass:"text-h5 font-weight-bold mb-0"},[e._v("Consumers Management")]),t(p.A),t(a.A,{staticClass:"px-4",attrs:{color:"primary","prepend-icon":"mdi-plus"},on:{click:e.onShowDialog}},[e._v(" Add New Consumer ")])],1),t(d.A),t(c.A,{staticClass:"elevation-0",attrs:{headers:e.headers,items:e.consumers,loading:e.loading,search:e.search,"items-per-page":15,"footer-props":{"items-per-page-options":[15,20,25,50,-1],showFirstLastPage:!0}},scopedSlots:e._u([{key:"top",fn:function(){return[t(g.A,{staticClass:"px-4 d-flex justify-end",attrs:{flat:""}},[t(h.A,{staticClass:"mt-6",class:{"focused-field":e.isFocused},attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search consumers...","hide-details":"",dense:"",outlined:"",rounded:"",clearable:""},on:{"click:clear":function(t){e.search=""},focus:function(t){e.isFocused=!0},blur:function(t){e.isFocused=!1}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]},proxy:!0},{key:"item.select",fn:function({item:s}){return[t(a.A,{attrs:{small:"",color:"primary"},on:{click:function(t){return e.onSelectItem(s)}}},[e._v(" Select ")])]}},{key:"item.isActive",fn:function({item:s}){return[t(l.A,{attrs:{small:"",color:s.isActive?"success":"error","text-color":"white"}},[e._v(" "+e._s(s.isActive?"Active":"Inactive")+" ")])]}},{key:"item.actions",fn:function({item:s}){return[t(k.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:n}){return[t(a.A,e._g(e._b({staticClass:"mr-2",attrs:{icon:"",small:"",color:"primary"},on:{click:function(t){return e.onViewItem(s)}}},"v-btn",n,!1),o),[t(m.A,{attrs:{small:""}},[e._v("mdi-eye")])],1)]}}],null,!0)},[t("span",[e._v("View Details")])]),t(k.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:n}){return[t(a.A,e._g(e._b({attrs:{icon:"",small:"",color:"error"},on:{click:function(t){return e.confirmDelete(s._id)}}},"v-btn",n,!1),o),[t(m.A,{attrs:{small:""}},[e._v("mdi-delete")])],1)]}}],null,!0)},[t("span",[e._v("Delete Consumer")])])]}},{key:"no-data",fn:function(){return[t(o.A,{staticClass:"ma-4",attrs:{type:"info",text:""}},[e._v("No consumers found")])]},proxy:!0}],null,!0)})],1),t("consumer-dialog",{ref:"consumer",attrs:{"consumer-data":e.selectedConsumer,update:e.isEditing},on:{"update:consumers":e.fetchConsumers},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}),t(u.A,{attrs:{"max-width":"400"},model:{value:e.showDeleteDialog,callback:function(t){e.showDeleteDialog=t},expression:"showDeleteDialog"}},[t(n.A,[t(r.ri,{staticClass:"py-3 px-4"},[t("span",{staticClass:"text-h6"},[e._v("Delete Consumer")])]),t(r.OQ,{staticClass:"pt-3"},[e._v(" Are you sure you want to delete this consumer? This action cannot be undone. ")]),t(r.SL,{staticClass:"py-3 px-4"},[t(p.A),t(a.A,{attrs:{text:"",color:"grey darken-1",disabled:e.loading},on:{click:function(t){e.showDeleteDialog=!1}}},[e._v(" Cancel ")]),t(a.A,{attrs:{color:"error",loading:e.loading},on:{click:e.handleDelete}},[e._v(" Delete ")])],1)],1)],1),t(f.A,{attrs:{color:e.snackbar.color,timeout:3e3,top:"",right:""},scopedSlots:e._u([{key:"action",fn:function({attrs:s}){return[t(a.A,e._b({attrs:{text:""},on:{click:function(t){e.snackbar.show=!1}}},"v-btn",s,!1),[e._v("Close")])]}}]),model:{value:e.snackbar.show,callback:function(t){e.$set(e.snackbar,"show",t)},expression:"snackbar.show"}},[e._v(" "+e._s(e.snackbar.text)+" ")])],1)},b=[],A=(s(4114),s(1988)),y=s(4414),x=s(174),N=s(2756),w=s(4312),C=s(7725),S=function(){var e=this,t=e._self._c;return t(u.A,{attrs:{persistent:"","max-width":"900"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(n.A,[t(r.ri,{staticClass:"text-h6 py-3 px-4"},[e._v(" Consumer "),t(p.A),t(a.A,{attrs:{icon:""},on:{click:e.closeDialog}},[t(m.A,[e._v("mdi-close")])],1)],1),t(d.A),t(r.OQ,{staticClass:"py-4"},[t(x.A,{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(N.A,[t(y.A,{attrs:{cols:"4"}},[t(h.A,{attrs:{label:"Last Name",outlined:"",dense:""},model:{value:e.consumer.lastName,callback:function(t){e.$set(e.consumer,"lastName",t)},expression:"consumer.lastName"}})],1),t(y.A,{attrs:{cols:"4"}},[t(h.A,{attrs:{label:"First Name",outlined:"",dense:""},model:{value:e.consumer.firstName,callback:function(t){e.$set(e.consumer,"firstName",t)},expression:"consumer.firstName"}})],1),t(y.A,{attrs:{cols:"4"}},[t(h.A,{attrs:{label:"Middle Name",outlined:"",dense:""},model:{value:e.consumer.middleName,callback:function(t){e.$set(e.consumer,"middleName",t)},expression:"consumer.middleName"}})],1),t(y.A,{attrs:{cols:"4"}},[t(w.A,{attrs:{items:e.consumer.extensions,label:"Name Extension",outlined:"",dense:""},model:{value:e.consumer.extension,callback:function(t){e.$set(e.consumer,"extension",t)},expression:"consumer.extension"}})],1),t(y.A,{attrs:{cols:"8"}},[t(h.A,{attrs:{label:"Contact No",outlined:"",dense:""},model:{value:e.consumer.contactNo,callback:function(t){e.$set(e.consumer,"contactNo",t)},expression:"consumer.contactNo"}})],1),t(y.A,{attrs:{cols:"9"}},[t(h.A,{attrs:{label:"Complete Address",outlined:"",dense:""},model:{value:e.consumer.address,callback:function(t){e.$set(e.consumer,"address",t)},expression:"consumer.address"}})],1),t(y.A,{attrs:{cols:"3"}},[t(w.A,{attrs:{items:e.consumer.puroks,label:"Purok",required:"",outlined:"",dense:""},model:{value:e.consumer.purok,callback:function(t){e.$set(e.consumer,"purok",t)},expression:"consumer.purok"}})],1),t(y.A,{attrs:{cols:"12"}},[t(C.A,{attrs:{label:"Active Status",color:"primary",inset:"",dense:""},model:{value:e.consumer.isActive,callback:function(t){e.$set(e.consumer,"isActive",t)},expression:"consumer.isActive"}})],1)],1)],1)],1),t(d.A),t(r.SL,{staticClass:"py-3 px-4"},[t(p.A),t(a.A,{attrs:{text:"",color:"grey darken-1",disabled:e.loading},on:{click:e.closeDialog}},[e._v(" Cancel ")]),t(a.A,{attrs:{color:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v(" "+e._s(e.buttonLabel)+" ")])],1)],1)],1)},D=[],_={name:"ConsumerDialog",props:{value:Boolean,update:Boolean,consumerData:{type:Object,default:()=>({})}},data(){return{dialog:this.value,loading:!1,valid:!0,consumer:{lastName:"",firstName:"",middleName:"",address:"Sitio Basak Brgy. Malandag",puroks:["Purok 1","Purok 2","Purok 3","Purok 4","Purok 5","Purok 6"],extensions:["Jr","Sr"],purok:"",extension:"",contactNo:"",isMember:!0,isActive:!0}}},computed:{buttonLabel(){return this.update?"Update":"Save"}},methods:{async handleSubmit(){this.loading=!0;try{const e={firstName:this.consumer.firstName,lastName:this.consumer.lastName,middleName:this.consumer.middleName,address:this.consumer.address,purok:this.consumer.purok,contactNo:this.consumer.contactNo,isActive:this.consumer.isActive};this.update?await A.A.put(`/consumer/${this.consumerData._id}`,e):await A.A.post("/consumer",e),this.$emit("update:consumers"),this.closeDialog()}catch(e){console.error("Error submitting form:",e)}finally{this.loading=!1}},closeDialog(){this.dialog=!1},clearForm(){this.consumer={lastName:"",firstName:"",middleName:"",address:"Sitio Basak Brgy. Malandag",puroks:["Purok 1","Purok 2","Purok 3","Purok 4","Purok 5","Purok 6"],extensions:["Jr","Sr"],purok:"",extension:"",contactNo:"",isMember:!0,isActive:!0},this.$refs.form&&this.$refs.form.reset()}},watch:{value(e){this.dialog=e},dialog(e){this.$emit("input",e),e||this.clearForm()},consumerData:{handler(e){this.consumer={lastName:e.lastName||"",firstName:e.firstName||"",middleName:e.middleName||"",address:e.address||"Sitio Basak Brgy. Malandag",puroks:["Purok 1","Purok 2","Purok 3","Purok 4","Purok 5","Purok 6"],extensions:["Jr","Sr"],purok:e.purok||"",extension:e.extension||"",contactNo:e.contactNo||"",isMember:void 0===e.isMember||e.isMember,isActive:void 0===e.isActive||e.isActive}},immediate:!0,deep:!0}}},$=_,P=s(1656),j=(0,P.A)($,S,D,!1,null,"9fbc15f2",null),M=j.exports,B={name:"ConsumersManagement",components:{ConsumerDialog:M},data(){return{consumers:[],headers:[{text:"Select",value:"select",sortable:!1},{text:"Account No",value:"accountNo"},{text:"Last Name",value:"lastName"},{text:"First Name",value:"firstName"},{text:"Middle Name",value:"middleName"},{text:"Address",value:"address"},{text:"Purok",value:"purok"},{text:"Contact No",value:"contactNo"},{text:"Status",value:"isActive"},{text:"Actions",value:"actions",sortable:!1}],search:"",isFocused:!1,loading:!1,showDialog:!1,showDeleteDialog:!1,selectedConsumer:{},isEditing:!1,selectedId:null,snackbar:{show:!1,text:"",color:""}}},methods:{showSnackbar(e,t="success"){this.snackbar={show:!0,text:e,color:t}},async fetchConsumers(){this.loading=!0;try{const e=await A.A.get("/consumer");this.consumers=e.data}catch(e){this.showSnackbar(e.message||"Failed to fetch consumers","error")}finally{this.loading=!1}},onViewItem(e){this.selectedConsumer={},this.$nextTick((()=>{this.selectedConsumer=e,this.isEditing=!0,this.showDialog=!0}))},onSelectItem(e){this.$router.push({path:`/admin/consumer/${e._id}/view`})},onShowDialog(){this.selectedConsumer={},this.isEditing=!1,this.showDialog=!0},confirmDelete(e){this.selectedId=e,this.showDeleteDialog=!0},async handleDelete(){this.loading=!0;try{await A.A.delete(`/consumer/${this.selectedId}`),this.showSnackbar("Consumer deleted successfully"),await this.fetchConsumers()}catch(e){this.showSnackbar(e.message||"Failed to delete consumer","error")}finally{this.loading=!1,this.showDeleteDialog=!1}}},created(){this.fetchConsumers()}},F=B,L=(0,P.A)(F,v,b,!1,null,"d68b7c4c",null),O=L.exports},4414:function(e,t,s){s(4114),s(125);var o=s(5471),a=s(8041),n=s(4152);const r=["sm","md","lg","xl"],l=(()=>r.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),i=(()=>r.reduce(((e,t)=>(e["offset"+(0,n.Zb)(t)]={type:[String,Number],default:null},e)),{}))(),c=(()=>r.reduce(((e,t)=>(e["order"+(0,n.Zb)(t)]={type:[String,Number],default:null},e)),{}))(),u={col:Object.keys(l),offset:Object.keys(i),order:Object.keys(c)};function d(e,t,s){let o=e;if(null!=s&&!1!==s){if(t){const s=t.replace(e,"");o+=`-${s}`}return"col"!==e||""!==s&&!0!==s?(o+=`-${s}`,o.toLowerCase()):o.toLowerCase()}}const m=new Map;t.A=o.Ay.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...l,offset:{type:[String,Number],default:null},...i,order:{type:[String,Number],default:null},...c,alignSelf:{type:String,default:null,validator:e=>["auto","start","end","center","baseline","stretch"].includes(e)},tag:{type:String,default:"div"}},render(e,{props:t,data:s,children:o,parent:n}){let r="";for(const a in t)r+=String(t[a]);let l=m.get(r);if(!l){let e;for(e in l=[],u)u[e].forEach((s=>{const o=t[s],a=d(e,s,o);a&&l.push(a)}));const s=l.some((e=>e.startsWith("col-")));l.push({col:!s||!t.cols,[`col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),m.set(r,l)}return e(t.tag,(0,a.Ay)(s,{class:l}),o)}})},2756:function(e,t,s){s(4114),s(125);var o=s(5471),a=s(8041),n=s(4152);const r=["sm","md","lg","xl"],l=["start","end","center"];function i(e,t){return r.reduce(((s,o)=>(s[e+(0,n.Zb)(o)]=t(),s)),{})}const c=e=>[...l,"baseline","stretch"].includes(e),u=i("align",(()=>({type:String,default:null,validator:c}))),d=e=>[...l,"space-between","space-around"].includes(e),m=i("justify",(()=>({type:String,default:null,validator:d}))),f=e=>[...l,"space-between","space-around","stretch"].includes(e),p=i("alignContent",(()=>({type:String,default:null,validator:f}))),h={align:Object.keys(u),justify:Object.keys(m),alignContent:Object.keys(p)},g={align:"align",justify:"justify",alignContent:"align-content"};function k(e,t,s){let o=g[e];if(null!=s){if(t){const s=t.replace(e,"");o+=`-${s}`}return o+=`-${s}`,o.toLowerCase()}}const v=new Map;t.A=o.Ay.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:c},...u,justify:{type:String,default:null,validator:d},...m,alignContent:{type:String,default:null,validator:f},...p},render(e,{props:t,data:s,children:o}){let n="";for(const a in t)n+=String(t[a]);let r=v.get(n);if(!r){let e;for(e in r=[],h)h[e].forEach((s=>{const o=t[s],a=k(e,s,o);a&&r.push(a)}));r.push({"no-gutters":t.noGutters,"row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),v.set(n,r)}return e(t.tag,(0,a.Ay)(s,{staticClass:"row",class:r}),o)}})}}]);
//# sourceMappingURL=445.598a7081.js.map